[build]
builder = "NIXPACKS"
buildCommand = "git submodule update --init --recursive && pnpm install --frozen-lockfile && pnpm --filter=settlement-showcase-server build"
watchPatterns = ["examples/settlement-showcase/server/**", "deps/x402/**"]

[deploy]
startCommand = "node examples/settlement-showcase/server/dist/index.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

[env]
NODE_VERSION = "20"
PNPM_VERSION = "10.7.0"

